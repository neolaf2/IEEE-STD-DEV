<div class="toc">
    <h3>Table of Contents</h3>
    {% assign headers = content | split: '<h' %}
    <ul>
    {% for header in headers %}
        {% if header contains '#' %}
            {% assign level = header | first %}
            {% if level == '2' or level == '3' %}
                <li class="toc-h{{ level }}">
                    {% assign title = header | split: '>' | last | split: '</h' | first %}
                    <a href="#{{ title | slugify }}">{{ title }}</a>
                </li>
            {% endif %}
        {% endif %}
    {% endfor %}
    </ul>
</div> 